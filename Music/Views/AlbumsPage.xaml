<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewmodels="clr-namespace:Music.ViewModels"
    x:Class="Music.Views.AlbumsPage"
    Title="ÐœÑƒÐ·Ñ‹ÐºÐ°">

    <ContentPage.BindingContext>
        <viewmodels:AlbumsViewModel />
    </ContentPage.BindingContext>

    <!-- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Grid: Ð²ÐµÑ€Ñ… - ÑÐ¿Ð¸ÑÐ¾Ðº, Ð½Ð¸Ð· - Ð¿Ð°Ð½ÐµÐ»ÑŒ -->
    <Grid RowDefinitions="*,Auto" Padding="15" RowSpacing="12">

        <!-- ================= Ð’ÐµÑ€Ñ…Ð½ÑÑ Ð¿Ñ€Ð¾ÐºÑ€ÑƒÑ‡Ð¸Ð²Ð°ÐµÐ¼Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ ================= -->
        <ScrollView Grid.Row="0">
            <VerticalStackLayout Spacing="12">

                <Label Text="ðŸŽµ ÐœÑƒÐ·Ñ‹ÐºÐ°"
                       FontSize="30"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       TextColor="White"/>

                <CollectionView
                    x:Name="AlbumsCollection"
                    ItemsSource="{Binding Albums}"
                    SelectionMode="Single"
                    SelectedItem="{Binding Selected, Mode=TwoWay}"
                    HeightRequest="500">

                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Border Padding="10"
                                    Margin="5"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 10">

                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup Name="CommonStates">
                                        <VisualState Name="Normal">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="#00FF00" />
                                                <Setter Property="Scale" Value="1.0" />
                                            </VisualState.Setters>
                                        </VisualState>
                                        <VisualState Name="Selected">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="#FFD50022" />
                                                <Setter Property="Scale" Value="1.03" />
                                            </VisualState.Setters>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>

                                <Grid ColumnDefinitions="100,*,Auto"
                                      RowDefinitions="Auto,Auto,Auto">

                                    <!-- ÐžÐ±Ð»Ð¾Ð¶ÐºÐ° -->
                                    <Image Source="album_header6.png"
                                           HeightRequest="80"
                                           WidthRequest="80"
                                           Aspect="AspectFill"
                                           Grid.RowSpan="3" />

                                    <!-- ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ -->
                                    <Label Text="{Binding Title}"
                                           FontSize="20"
                                           FontAttributes="Bold"
                                           Grid.Column="1"
                                           TextColor="Black"/>

                                    <!-- ÐœÑƒÐ·Ñ‹ÐºÐ°Ð½Ñ‚ -->
                                    <Label Grid.Column="1"
                                           Grid.Row="1"
                                           FontSize="14"
                                           FontAttributes="Italic"
                                           TextColor="Black">
                                        <Label.Text>
                                            <MultiBinding StringFormat="{}{0} ({1})">
                                                <Binding Path="MusicianName" />
                                                <Binding Path="MusicianCountry" />
                                            </MultiBinding>
                                        </Label.Text>
                                    </Label>

                                    <!-- Ð–Ð°Ð½Ñ€ Ð¸ Ð³Ð¾Ð´ -->
                                    <Label Grid.Column="1"
                                           Grid.Row="2"
                                           TextColor="Black">
                                        <Label.Text>
                                            <MultiBinding StringFormat="{}{0} â€¢ {1}">
                                                <Binding Path="Genre" />
                                                <Binding Path="ReleaseYear" />
                                            </MultiBinding>
                                        </Label.Text>
                                    </Label>

                                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Play -->
                                    <ImageButton x:Name="PlayButton"
                                                 Source="play_button.png"
                                                 Grid.Column="2"
                                                 Grid.RowSpan="3"
                                                 WidthRequest="50"
                                                 HeightRequest="50"
                                                 BackgroundColor="Transparent"
                                                 Aspect="AspectFit"
                                                 Clicked="OnPlayClicked" />
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

            </VerticalStackLayout>
        </ScrollView>

        <!-- ================= ÐÐ¸Ð¶Ð½ÑÑ Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ ================= -->
        <VerticalStackLayout Grid.Row="1"
                             Padding="5,10"
                             Spacing="10"
                             BackgroundColor="{AppThemeBinding Light=#101010, Dark=#101010}"
                             VerticalOptions="End"
                             Margin="0,10,0,0">

            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
            <HorizontalStackLayout Spacing="10">
                <Button Text="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ" Clicked="OnAddClicked" HorizontalOptions="FillAndExpand" />
                <Button Text="Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ" Clicked="OnEditClicked" HorizontalOptions="FillAndExpand" />
                <Button Text="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ" Clicked="OnDeleteClicked" HorizontalOptions="FillAndExpand" />
            </HorizontalStackLayout>

            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° ÐºÐ°Ñ€ÑƒÑÐµÐ»Ð¸ -->
            <Button Text="ÐšÐ°Ñ€ÑƒÑÐµÐ»ÑŒÐºÐ°"
                    Clicked="OnOpenCarouselClicked"
                    BackgroundColor="#00FF00"
                    TextColor="Black"
                    Margin="0,10,0,0"/>

            <!-- ÐšÐ°Ñ€Ñ‚Ð¸Ð½ÐºÐ¸ -->
            <HorizontalStackLayout
                Spacing="25"
                HorizontalOptions="Center"
                Margin="0,20,0,10">

                <Image Source="album_header7.png"
                       HeightRequest="200"
                       WidthRequest="200"
                       Aspect="AspectFill"
                       HorizontalOptions="Center"/>

                <Image Source="album_header4.png"
                       HeightRequest="200"
                       WidthRequest="200"
                       Aspect="AspectFill"
                       HorizontalOptions="Center"/>
            </HorizontalStackLayout>
        </VerticalStackLayout>

    </Grid>
</ContentPage>
